<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #1E92FB; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style>
<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>


  
  
    
    
  <script src="/mcqingxian.github.io/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/mcqingxian.github.io/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/mcqingxian.github.io/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/mcqingxian.github.io/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/mcqingxian.github.io/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="ReactNative,iOS,Swift,Java">








  <link rel="shortcut icon" type="image/x-icon" href="/mcqingxian.github.io/uploads/images/dengta.png?v=5.1.2">






<meta name="description" content="1.iPhone X 上运行有黑色区域问题解决方案：1使用LaunchScreen来当做入场页 或者 修改Assets中的LaunchImage，添加iPhoneX的Launch图1125*2436（竖屏），注意这边的图片像素必须按要求来 2.navigationBar适配1iOS11前导航栏的高度是64，其中statusBar的高度为20，而iPhoneX的statusBar高度变为了44，如">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS 11、iPhone X、Xcode9">
<meta property="og:url" content="https://github.com/mcqingxian/mcqingxian.github.io/2017/09/29/悟-OC/iOS 11、iPhone X、Xcode9/index.html">
<meta property="og:site_name" content="Mc">
<meta property="og:description" content="1.iPhone X 上运行有黑色区域问题解决方案：1使用LaunchScreen来当做入场页 或者 修改Assets中的LaunchImage，添加iPhoneX的Launch图1125*2436（竖屏），注意这边的图片像素必须按要求来 2.navigationBar适配1iOS11前导航栏的高度是64，其中statusBar的高度为20，而iPhoneX的statusBar高度变为了44，如">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://ojca2gwha.bkt.clouddn.com/iPhoneX-Area.png">
<meta property="og:image" content="http://ojca2gwha.bkt.clouddn.com/iOS11-safeArea.png">
<meta property="og:updated_time" content="2017-09-29T06:00:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS 11、iPhone X、Xcode9">
<meta name="twitter:description" content="1.iPhone X 上运行有黑色区域问题解决方案：1使用LaunchScreen来当做入场页 或者 修改Assets中的LaunchImage，添加iPhoneX的Launch图1125*2436（竖屏），注意这边的图片像素必须按要求来 2.navigationBar适配1iOS11前导航栏的高度是64，其中statusBar的高度为20，而iPhoneX的statusBar高度变为了44，如">
<meta name="twitter:image" content="http://ojca2gwha.bkt.clouddn.com/iPhoneX-Area.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/mcqingxian.github.io/',
    scheme: 'Gemini',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://github.com/mcqingxian/mcqingxian.github.io/2017/09/29/悟-OC/iOS 11、iPhone X、Xcode9/">





  <title>iOS 11、iPhone X、Xcode9 | Mc</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/mcqingxian.github.io/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Mc</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Live and learn</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/mcqingxian.github.io/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/mcqingxian.github.io/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/mcqingxian.github.io/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://github.com/mcqingxian/mcqingxian.github.io/mcqingxian.github.io/2017/09/29/悟-OC/iOS 11、iPhone X、Xcode9/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/mcqingxian.github.io/uploads/images/dengta.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mc">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">iOS 11、iPhone X、Xcode9</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-29T08:00:00+08:00">
                2017-09-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/mcqingxian.github.io/categories/悟-OC/" itemprop="url" rel="index">
                    <span itemprop="name">悟-OC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="http://ojca2gwha.bkt.clouddn.com/iPhoneX-Area.png" alt="image"></p>
<h4 id="1-iPhone-X-上运行有黑色区域问题"><a href="#1-iPhone-X-上运行有黑色区域问题" class="headerlink" title="1.iPhone X 上运行有黑色区域问题"></a>1.iPhone X 上运行有黑色区域问题</h4><p>解决方案：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用LaunchScreen来当做入场页 或者 修改Assets中的LaunchImage，添加iPhoneX的Launch图1125*2436（竖屏），注意这边的图片像素必须按要求来</span><br></pre></td></tr></table></figure></p>
<h4 id="2-navigationBar适配"><a href="#2-navigationBar适配" class="headerlink" title="2.navigationBar适配"></a>2.navigationBar适配</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iOS11前导航栏的高度是64，其中statusBar的高度为20，而iPhoneX的statusBar高度变为了44，如果是自定义的NavigationBar，这部分需要做相应的适配。</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<blockquote>
<p>适配导航条高度<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@implementation TestUtil</span><br><span class="line">+ (CGFloat)navigationBarHeight &#123;</span><br><span class="line">    if (IS_iPhoneX) &#123;</span><br><span class="line">        return 88.0f;</span><br><span class="line">    &#125;</span><br><span class="line">    return 64.0f;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line">判断当前机型是否是iPhoneX   宽:375   高:812</span><br><span class="line">#define IS_iPhoneX ([UIScreen mainScreen].bounds.size.width == 375 &amp;&amp; [UIScreen mainScreen].bounds.size.height == 812)</span><br></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#define kDevice_iPhoneX CGSizeEqualToSize(CGSizeMake(375, 812), [[UIScreen mainScreen] bounds].size)</span><br><span class="line">// 或者</span><br><span class="line">if (UIScreen.mainScreen.bounds.size.height == 812) &#123;</span><br><span class="line">NSLog(@&quot;this is iPhone X&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-tabBar适配"><a href="#3-tabBar适配" class="headerlink" title="3.tabBar适配"></a>3.tabBar适配</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iPhoneX的底部增加了虚拟Homeq区，由于安全区域的原因默认tabBar的高度由49变为83，增高了34，所以自定义的底部TabBar也需要需改其适配方案。</span><br></pre></td></tr></table></figure>
<h4 id="4-iOS11新增版本判断API"><a href="#4-iOS11新增版本判断API" class="headerlink" title="4. iOS11新增版本判断API"></a>4. iOS11新增版本判断API</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SafeArea、contentInsetAdjustmentBehavior、adjustedContentInset</span><br></pre></td></tr></table></figure>
<blockquote>
<p>iOS11版本现在有了简单的API，OC也开始支持swfit的@available语法，不用再手写iOS版本判断了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if (@available(iOS 11.0, *)) &#123;</span><br><span class="line">// 版本适配</span><br><span class="line">&#125;</span><br><span class="line">// 或者</span><br><span class="line">#ifdef __IPHONE_11_0</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="5-新增框架"><a href="#5-新增框架" class="headerlink" title="5.新增框架"></a>5.新增框架</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">新加入 SDK 的大的框架有两个，分别是负责简化和集成机器学习的 Core ML 和用来创建增强现实 (AR) 应用的 ARKit。</span><br></pre></td></tr></table></figure>
<h4 id="6-UINavigationBar新增属性prefersLargeTitles（BOOL）"><a href="#6-UINavigationBar新增属性prefersLargeTitles（BOOL）" class="headerlink" title="6. UINavigationBar新增属性prefersLargeTitles（BOOL）"></a>6. UINavigationBar新增属性prefersLargeTitles（BOOL）</h4><blockquote>
<p>大标题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">在UI navigation bar中新增了一个BOOL属性prefersLargeTitles,将该属性设置为ture，navigation bar就会在整个APP中显示大标题，如果想要在控制不同页面大标题的显示，可以通过设置当前页面的navigationItem的largeTitleDisplayMode属性；</span><br><span class="line">typedef NS_ENUM(NSInteger, UINavigationItemLargeTitleDisplayMode) &#123;</span><br><span class="line"></span><br><span class="line">  /// 自动模式依赖上一个 item 的特性</span><br><span class="line"></span><br><span class="line">  UINavigationItemLargeTitleDisplayModeAutomatic,</span><br><span class="line"></span><br><span class="line">  /// 针对当前 item 总是启用大标题特性</span><br><span class="line"></span><br><span class="line">  UINavigationItemLargeTitleDisplayModeAlways,</span><br><span class="line"></span><br><span class="line">  /// Never </span><br><span class="line"></span><br><span class="line">  UINavigationItemLargeTitleDisplayModeNever,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="7-Navigation-集成-UISearchController"><a href="#7-Navigation-集成-UISearchController" class="headerlink" title="7. Navigation 集成 UISearchController"></a>7. Navigation 集成 UISearchController</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">把你的UISearchController赋值给navigationItem，就可以实现将UISearchController集成到Navigation。</span><br><span class="line"></span><br><span class="line">navigationItem.searchController  //iOS 11 新增属性</span><br><span class="line"></span><br><span class="line">navigationItem.hidesSearchBarWhenScrolling //决定滑动的时候是否隐藏搜索框；iOS 11 新增属性</span><br></pre></td></tr></table></figure>
<h4 id="8-UINavigationController和滚动交互"><a href="#8-UINavigationController和滚动交互" class="headerlink" title="8. UINavigationController和滚动交互"></a>8. UINavigationController和滚动交互</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">滚动的时候，以下交互操作都是由UINavigationController负责调动的：</span><br><span class="line">1. UIsearchController搜索框效果更新</span><br><span class="line">2. 大标题效果的控制</span><br><span class="line">3. Rubber banding效果 //当你开始往下拉，大标题会变大来回应那个滚轮</span><br><span class="line">所以，如果你使用navigation bar，组装push和pop体验，你不会得到searchController的集成、大标题的控制更新和Rubber banding效果，因为这些都是由UINavigationController控制的。</span><br></pre></td></tr></table></figure>
<h4 id="9-UIToolbar-and-UINavigationBar—-Layout"><a href="#9-UIToolbar-and-UINavigationBar—-Layout" class="headerlink" title="9. UIToolbar and UINavigationBar— Layout"></a>9. UIToolbar and UINavigationBar— Layout</h4><blockquote>
<p>在 iOS 11 中，当苹果进行所有这些新特性时，也进行了其他的优化，针对 UIToolbar 和 UINavigaBar 做了新的自动布局扩展支持，自定义的bar button items、自定义的title都可以通过layout来表示尺寸。 需要注意的是，你的constraints需要在view内部设置，所以如果你有一个自定义的标题视图，你需要确保任何约束只依赖于标题视图及其任何子视图。当你使用自动布局，系统假设你知道你在做什么。</p>
</blockquote>
<h4 id="10-Avoiding-Zero-Sized-Custom-Views"><a href="#10-Avoiding-Zero-Sized-Custom-Views" class="headerlink" title="10. Avoiding Zero-Sized Custom Views"></a>10. Avoiding Zero-Sized Custom Views</h4><blockquote>
<p>自定义视图的size为0是因为你有一些模糊的约束布局。要避免视图尺寸为0，可以从以下方面做：</p>
<ul>
<li>UINavigationBar 和 UIToolbar 提供位置</li>
<li>开发者则必须提供视图的size，有三种方式：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 对宽度和高度的约束；</span><br><span class="line">* 实现 intrinsicContentSize；</span><br><span class="line">* 通过约束关联你的子视图；</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h4 id="11-管理margins-和-insets"><a href="#11-管理margins-和-insets" class="headerlink" title="11. 管理margins 和 insets"></a>11. 管理margins 和 insets</h4><blockquote>
<p>layout margins<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">基于约束的Auto Layout，使我们搭建能够动态响应内部和外部变化的用户界面。Auto Layout为每一个view都定义了margin。margin指的是控件显示内容部分的边缘和控件边缘的距离。 可以用layoutMargins或者layoutMarginsGuide属性获得view的margin,margin是视图内部的一部分。layoutMargins允许获取或者设置UIEdgeInsets结构的margin。layoutMarginsGuide则获取到只读的UILayoutGuide对象。</span><br><span class="line">在iOS11新增了一个属性：directional layout margins，该属性是NSDirectionalEdgeInsets结构体类型的属性：</span><br><span class="line">typedef struct NSDirectionalEdgeInsets &#123;  </span><br><span class="line">    CGFloat top, leading, bottom, trailing;</span><br><span class="line">&#125; NSDirectionalEdgeInsets API_AVAILABLE(ios(11.0),tvos(11.0),watchos(4.0));</span><br><span class="line">layoutMargins是UIEdgeInsets结构体类型的属性：</span><br><span class="line">typedef struct UIEdgeInsets &#123;</span><br><span class="line"></span><br><span class="line">  CGFloat top, left, bottom, right;</span><br><span class="line">&#125; UIEdgeInsets;</span><br><span class="line">从上面两种结构体的对比可以看出，NSDirectionalEdgeInsets 属性用leading 和 trailing 取代了之前的 left 和 right。</span><br><span class="line">directional layout margins属性的说明如下：</span><br><span class="line">directionalLayoutMargins.leading is used on the left when the user interface direction is LTR and on the right for RTL.</span><br><span class="line">Vice versa for directionalLayoutMargins.trailing.</span><br><span class="line">例子：当你设置了trailing = 30；当在一个right to left 语言下trailing的值会被设置在view的左边，可以通过layout margins的left属性读出该值。如下图所示：</span><br><span class="line">还有其他一些更新。自从引入layout margins，当将一个view添加到viewController时，viewController会修复view的layoutMargins为UIKit定义的一个值，这些调整对外是封闭的。从iOS11开始，这些不再是一个固定的值，它们实际是最小值，你可以改变你的view的layoutMargins为任意一个更大的值。而且，viewController新增了一个属性：viewRespectsSystemMinimumLayoutMargins，如果你设置该属性为”false”，你就可以改变你的layout margins为任意你想设置的值，包括0，如下图所示：</span><br><span class="line">从iOS 7以来，我们在整个操作系统中都有这些半透明的bars，苹果鼓励我们通过这些bars绘制内容，我们是通过viewController 的edgesForExtendedLayout属性来做这些的。</span><br><span class="line">iOS 7 开始，在 UIViewController中引入的 topLayoutGuide和 bottomLayoutGuide 在 iOS 11 中被废弃了，取而代之的就是safeArea的概念，safeArea是描述你的视图部分不被任何内容遮挡的方法。 它提供两种方式：safeAreaInsets或safeAreaLayoutGuide来提供给你safeArea的参照值，即 insets 或者 layout guide。 </span><br><span class="line">如果有一个自定义的viewController，你可能要添加你自己的bars，增加safeAreaInsets的值，可以通过一个新的属性：addtionalSafeAreaInsets来改变safeAreaInsets的值，当你的viewController改变了它的safeAreaInsets值时，有两种方式获取到回调：</span><br><span class="line">UIView.safeAreaInsetsDidChange()</span><br><span class="line"></span><br><span class="line">UIViewController.viewSafeAreaInsetsDidChange()</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="12-UIScrollView-and-UITableView的新特性"><a href="#12-UIScrollView-and-UITableView的新特性" class="headerlink" title="12. UIScrollView and UITableView的新特性"></a>12. UIScrollView and UITableView的新特性</h4><blockquote>
<p>ScrollViews<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">如果有一些文本位于UI滚动视图的内部，并包含在导航控制器中，现在一般navigationContollers会传入一个contentInset给其最顶层的viewController的scrollView，在iOS11中进行了一个很大的改变，不再通过scrollView的contentInset属性了，而是新增了一个属性：adjustedContentInset</span><br><span class="line"></span><br><span class="line">新增的contentInsetAdjustmentBehavior属性用来配置adjustedContentInset的行为，该结构体有以下几种类型：</span><br><span class="line">typedef NS_ENUM(NSInteger, UIScrollViewContentInsetAdjustmentBehavior) &#123;  </span><br><span class="line">    UIScrollViewContentInsetAdjustmentAutomatic, </span><br><span class="line">    UIScrollViewContentInsetAdjustmentScrollableAxes,</span><br><span class="line">    UIScrollViewContentInsetAdjustmentNever,</span><br><span class="line">    UIScrollViewContentInsetAdjustmentAlways,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@property(nonatomic) UIScrollViewContentInsetAdjustmentBehavior contentInsetAdjustmentBehavior;</span><br><span class="line"></span><br><span class="line">@property(nonatomic, readonly) UIEdgeInsets adjustedContentInset；</span><br><span class="line"></span><br><span class="line">//adjustedContentInset值被改变的delegate</span><br><span class="line"></span><br><span class="line">- (void)adjustedContentInsetDidChange; </span><br><span class="line">- (void)scrollViewDidChangeAdjustedContentInset:(UIScrollView *)scrollView;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="13-TableViews-：在iOS-11中默认启用Self-Sizing"><a href="#13-TableViews-：在iOS-11中默认启用Self-Sizing" class="headerlink" title="13. TableViews ：在iOS 11中默认启用Self-Sizing"></a>13. TableViews ：在iOS 11中默认启用Self-Sizing</h4><blockquote>
<p>这个应该是UITableView最大的改变。我们知道在iOS8引入Self-Sizing 之后，我们可以通过实现estimatedRowHeight相关的属性来展示动态的内容，实现了estimatedRowHeight属性后，得到的初始contenSize是个估算值，是通过estimatedRowHeight x cell的个数得到的，并不是最终的contenSize，tableView就不会一次性计算所有的cell的高度了，只会计算当前屏幕能够显示的cell个数再加上几个，滑动时，tableView不停地得到新的cell，更新自己的contenSize，在滑到最后的时候，会得到正确的contenSize。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Self-Sizing在iOS11下是默认开启的，Headers, footers, and cells都默认开启Self-Sizing，所有estimated 高度默认值从iOS11之前的 0 改变为UITableViewAutomaticDimension：</span><br><span class="line">@property (nonatomic) CGFloat estimatedRowHeight NS_AVAILABLE_IOS(7_0); // default is UITableViewAutomaticDimension, set to 0 to disable</span><br><span class="line">如果目前项目中没有使用estimateRowHeight属性，在iOS11的环境下就要注意了，因为开启Self-Sizing之后，tableView是使用estimateRowHeight属性的，这样就会造成contentSize和contentOffset值的变化，如果是有动画是观察这两个属性的变化进行的，就会造成动画的异常，因为在估算行高机制下，contentSize的值是一点点地变化更新的，所有cell显示完后才是最终的contentSize值。因为不会缓存正确的行高，tableView reloadData的时候，会重新计算contentSize，就有可能会引起contentOffset的变化。</span><br><span class="line">iOS11下不想使用Self-Sizing的话，可以通过以下方式关闭：（前言中提到的问题也是通过这种方式解决的）</span><br><span class="line">self.tableView.estimatedRowHeight = 0;</span><br><span class="line"></span><br><span class="line">self.tableView.estimatedSectionHeaderHeight = 0;</span><br><span class="line"></span><br><span class="line">self.tableView.estimatedSectionFooterHeight = 0;</span><br><span class="line">iOS11下，如果没有设置estimateRowHeight的值，也没有设置rowHeight的值，那contentSize计算初始值是 44 x cell的个数，如下图：rowHeight和estimateRowHeight都是默认值UITableViewAutomaticDimension 而rowNum = 15；则初始contentSize = 44  15 = 660；</span><br></pre></td></tr></table></figure>
<h4 id="14-TableViews：separatorInset-扩展"><a href="#14-TableViews：separatorInset-扩展" class="headerlink" title="14. TableViews：separatorInset 扩展"></a>14. TableViews：separatorInset 扩展</h4><blockquote>
<p>iOS 7 引入separatorInset属性，用以设置 cell 的分割线边距，在 iOS 11 中对其进行了扩展。可以通过新增的UITableViewSeparatorInsetReference枚举类型的separatorInsetReference属性来设置separatorInset属性的参照值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger, UITableViewSeparatorInsetReference) &#123;  </span><br><span class="line">UITableViewSeparatorInsetFromCellEdges,   //默认值，表示separatorInset是从cell的边缘的偏移量</span><br><span class="line"></span><br><span class="line">UITableViewSeparatorInsetFromAutomaticInsets  //表示separatorInset属性值是从一个insets的偏移量</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="15-TableViews-和-SafeArea"><a href="#15-TableViews-和-SafeArea" class="headerlink" title="15. TableViews 和 SafeArea"></a>15. TableViews 和 SafeArea</h4><blockquote>
<p>有以下几点需要注意：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* separatorInset 被自动地关联到 safe area insets，因此，默认情况下，表视图的整个内容避免了其根视图控制器的安全区域的插入。</span><br><span class="line">* UITableviewCell 和 UITableViewHeaderFooterView的 content view 在安全区域内；因此你应该始终在 content view 中使用add-subviews操作。</span><br><span class="line">* 所有的 headers 和 footers 都应该使用UITableViewHeaderFooterView，包括 table headers 和 footers、section headers 和 footers。</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="16-滑动操作（Swipe-Actions）-右滑-删除-置顶-收藏等"><a href="#16-滑动操作（Swipe-Actions）-右滑-删除-置顶-收藏等" class="headerlink" title="16. 滑动操作（Swipe Actions）(右滑-删除,置顶,收藏等)"></a>16. 滑动操作（Swipe Actions）(右滑-删除,置顶,收藏等)</h4><blockquote>
<p>在iOS8之后，苹果官方增加了UITableVIew的右滑操作接口，即新增了一个代理方法(tableView: editActionsForRowAtIndexPath:)和一个类(UITableViewRowAction)，代理方法返回的是一个数组，我们可以在这个代理方法中定义所需要的操作按钮(删除、置顶等)，这些按钮的类就是UITableViewRowAction。这个类只能定义按钮的显示文字、背景色、和按钮事件。并且返回数组的第一个元素在UITableViewCell的最右侧显示，最后一个元素在最左侧显示。从iOS 11开始有了一些改变，首先是可以给这些按钮添加图片了，然后是如果实现了以下两个iOS 11新增的代理方法，将会取代(tableView: editActionsForRowAtIndexPath:)代理方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// Swipe actions</span><br><span class="line"></span><br><span class="line">// These methods supersede -editActionsForRowAtIndexPath: if implemented</span><br><span class="line"></span><br><span class="line">- (nullable UISwipeActionsConfiguration *)tableView:(UITableView *)tableView leadingSwipeActionsConfigurationForRowAtIndexPath:(NSIndexPath *)indexPath</span><br><span class="line">- (nullable UISwipeActionsConfiguration *)tableView:(UITableView *)tableView trailingSwipeActionsConfigurationForRowAtIndexPath:(NSIndexPath *)indexPath</span><br><span class="line">这两个代理方法返回的是UISwipeActionsConfiguration类型的对象，创建该对象及赋值可看下面的代码片段：</span><br><span class="line">- ( UISwipeActionsConfiguration *)tableView:(UITableView *)tableView trailingSwipeActionsConfigurationForRowAtIndexPath:(NSIndexPath *)indexPath &#123;</span><br><span class="line"></span><br><span class="line">    //删除</span><br><span class="line">    UIContextualAction *deleteRowAction = [UIContextualAction contextualActionWithStyle:UIContextualActionStyleDestructive title:@&quot;delete&quot; handler:^(UIContextualAction * _Nonnull action, __kindof UIView * _Nonnull sourceView, void (^ _Nonnull completionHandler)(BOOL)) &#123;</span><br><span class="line">        [self.titleArr removeObjectAtIndex:indexPath.row];</span><br><span class="line">        completionHandler (YES);</span><br><span class="line">    &#125;];</span><br><span class="line">    deleteRowAction.image = [UIImage imageNamed:@&quot;icon_del&quot;];</span><br><span class="line">    deleteRowAction.backgroundColor = [UIColor blueColor];</span><br><span class="line"></span><br><span class="line">    UISwipeActionsConfiguration *config = [UISwipeActionsConfiguration configurationWithActions:</span><br><span class="line"></span><br><span class="line">    @[deleteRowAction]];</span><br><span class="line"></span><br><span class="line">    return config;</span><br><span class="line">&#125;</span><br><span class="line">创建UIContextualAction对象时，UIContextualActionStyle有两种类型，如果是置顶、已读等按钮就使用UIContextualActionStyleNormal类型，delete操作按钮可使用UIContextualActionStyleDestructive类型，当使用该类型时，如果是右滑操作，一直向右滑动某个cell，会直接执行删除操作，不用再点击删除按钮，这也是一个好玩的更新。</span><br><span class="line">typedef NS_ENUM(NSInteger, UIContextualActionStyle) &#123;</span><br><span class="line">    UIContextualActionStyleNormal,</span><br><span class="line">    UIContextualActionStyleDestructive</span><br><span class="line">&#125; NS_SWIFT_NAME(UIContextualAction.Style)</span><br><span class="line">滑动操作这里还有一个需要注意的是，当cell高度较小时，会只显示image，不显示title，当cell高度够大时，会同时显示image和title。我写demo测试的时候，因为每个cell的高度都较小，所以只显示image，然后我增加cell的高度后，就可以同时显示image和title了。</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="17-UIBarItem"><a href="#17-UIBarItem" class="headerlink" title="17. UIBarItem"></a>17. UIBarItem</h4><blockquote>
<p>新增横屏长安bar可以放大,并显示HUD图片<br>UIBarItem是UI tab bar item和UI bar button item的父类，要想实现上面介绍的效果，只需要为UIBarItem 设置landscapeImagePhone属性，在storyboard中也支持这个设置，对于HUD的image需要设置另一个iOS11新增的属性：largeContentSizeImage</p>
</blockquote>
<h4 id="18-遇到的另外一个与安全区域无关的tableView内容下移的问题"><a href="#18-遇到的另外一个与安全区域无关的tableView内容下移的问题" class="headerlink" title="18. 遇到的另外一个与安全区域无关的tableView内容下移的问题"></a>18. 遇到的另外一个与安全区域无关的tableView内容下移的问题</h4><blockquote>
<p>页面的tableView下移了约40pt，这里是否跟安全区域有关呢？(无关)<br>查了下页面结构，tableView的父视图的frame在navigationbar的bottom之下，tableView在父视图的安全区域内，打印出来tableView的SafeAreaInset值也是(0，0，0，0);所以不是安全区域导致的内容下移。<br>经过查看代码，发现tableView的style:UITableViewStyleGrouped类型，默认tableView开头和结尾是有间距的，不需要这个间距的话，可以通过实现heightForHeaderInSection方法（返回一个较小值：0.1）和viewForHeaderInSection（返回一个view）来去除头部的留白，底部同理。</p>
</blockquote>
<blockquote>
<p>原因:<br>iOS 11上发生tableView顶部有留白，原因是代码中只实现了heightForHeaderInSection方法，而没有实现viewForHeaderInSection方法。那样写是不规范的，只实现高度，而没有实现view，但代码这样写在iOS 11之前是没有问题的，iOS 11之后应该是由于开启了估算行高机制引起了bug。</p>
</blockquote>
<blockquote>
<p>解决方案:<br>1,添加上viewForHeaderInSection方法后，问题就解决了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">2,添加以下代码关闭估算行高:</span><br><span class="line">self.tableView.estimatedRowHeight = 0;</span><br><span class="line"></span><br><span class="line">self.tableView.estimatedSectionHeaderHeight = 0;</span><br><span class="line"></span><br><span class="line">self.tableView.estimatedSectionFooterHeight = 0;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="19-安全区域适配"><a href="#19-安全区域适配" class="headerlink" title="19. 安全区域适配"></a>19. 安全区域适配</h4><blockquote>
<p>安全区域定义了view中可视区域的部分，帮助我们将view放置在整个屏幕的可视的部分。即使把navigationbar设置为透明的，系统也认为安全区域是从navigationbar的bottom开始的。这样保证不被系统的状态栏、或父视图提供的view如导航栏覆盖。<br><img src="http://ojca2gwha.bkt.clouddn.com/iOS11-safeArea.png" alt="image"></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">iOS11的UIViewController和UIView新加了-(void)viewSafeAreaInsetsDidChange方法，当安全区域改变后该方法会被调用。然后在该方法中根据safeAreaInses属性更新子视图中控件的布局位置。</span><br><span class="line">当然如果你要改变一个UIViewController的safeAreaInsets值, 可以通过设置addtionalSafeAreaInsets属性来实现, 例如你要自定义一些特殊的样式时。</span><br><span class="line">需要注意的是viewSafeAreaInsetsDidChange在UIViewController中第一次调用的时间是在-(void)viewWillAppear:(BOOL)animated调用之后, 在- (void)viewWillLayoutSubviews调用之前。所以可以在viewWillAppear里设置受影响的页面的addtionalSafeAreaInsets属性。</span><br><span class="line"></span><br><span class="line">- (void)viewSafeAreaInsetsDidChange&#123;</span><br><span class="line">[super viewSafeAreaInsetsDidChange];</span><br><span class="line">if (@available(iOS 11.0, *)) &#123;</span><br><span class="line">NSLog(@&quot;safeAreaInset list= %@&quot;,NSStringFromUIEdgeInsets(self.view.safeAreaInsets));</span><br><span class="line">NSLog(@&quot;safeAreaLayout list= %@&quot;,self.view.safeAreaLayoutGuide);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">UIScrollView &amp; UITableView</span><br><span class="line"></span><br><span class="line">测试过程中发现tableView会有20pt/64pt的偏移，其原因是由于iOS 11废弃了UIViewController的automaticallyAdjustsScrollViewInsets属性，新增了contentInsetAdjustmentBehavior属性，所以当超出安全区域时系统自动调整了SafeAreaInsets，进而影响了adjustedContentInset，在iOS11中决定tableView内容与边缘距离的是adjustedContentInset，所以需要设置UIScrollView的contentInsetAdjustmentBehavior属性。</span><br><span class="line">1.手动适配</span><br><span class="line">如果你使用了UITableView、UIScrollView，可以直接使用以下代码做适配，这样系统就不会主动为你设置边缘距离，但是你可能需要手动适配UITableView的contenteInset。</span><br><span class="line"></span><br><span class="line">#ifdef __IPHONE_11_0</span><br><span class="line">// 单独作用与某个tableView</span><br><span class="line">if ([tableView respondsToSelector:@selector(setContentInsetAdjustmentBehavior:)]) &#123;</span><br><span class="line">tableView.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever;</span><br><span class="line">&#125;</span><br><span class="line">// 作用与所有的UIScrollView</span><br><span class="line">UIScrollView.appearance.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever;</span><br><span class="line">// 设置view的宽高</span><br><span class="line">tableView.contentInset = UIEdgeInsetsMake(0, 0, 34, 0);</span><br><span class="line">#endif</span><br><span class="line">2.自动适配</span><br><span class="line">设置contentInsetAdjustmentBehavior属性为UIScrollViewContentInsetAdjustmentAutomatic，则系统会自动计算contentView的偏移量。</span><br><span class="line">3.设置安全区域的addtionalSafeAreaInset</span><br><span class="line">某些情况下，你需要顶部区域，比如广告区域覆盖Status，则可以设置相应页面的addtionalSafeAreaInset属性，这样系统不会将safeArea上调到从status开始。这样可以提供更好的用户体验。</span><br><span class="line">例如如果你的SafeAreaInset值为(44,0,0,0)，则需要设置相应的additionalSafeAreaInsets值为(-44,0,0,0)。</span><br><span class="line"></span><br><span class="line">if (@available(iOS 11.0, *)) &#123;</span><br><span class="line">self.additionalSafeAreaInsets = UIEdgeInsetsMake(-44, 0, 0, 0);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">// Fallback on earlier versions</span><br><span class="line">&#125;</span><br><span class="line">4.iOS11开始UITableView开启了自动估算行高，estimatedRowHeight estimatedSectionHeaderHeight estimatedSectionFooterHeight三个高度估算属性由默认的0变成了UITableViewAutomaticDimension，所以heightForHeaderInSection和viewForHeaderInSection应该一起使用，不然tableView顶部滑动的时候会有空白。</span><br><span class="line">在适配过程中发现UITableView会在Header/Footer返回size为负值的情况下会(之前遗漏的bug)崩溃，这块可以自查下，而iOS11之前的版本不会。</span><br><span class="line">其他方案……</span><br><span class="line"></span><br><span class="line">另外有人对iPhoneX整个UIWindow做了内容的调整，只是UI还是有点丑，感兴趣的同学可以去看看该GitHub，不过可能这样的设计方案不会通过APPLE的审核。</span><br><span class="line">API适配</span><br><span class="line"></span><br><span class="line">LocalAuthentication 本地认证</span><br><span class="line"></span><br><span class="line">本地认证框架提供了从具有指定安全策略(密码或生物学特征)的用户请求身份验证的功能。例如，要求用户仅使用Face ID或Touch ID进行身份验证，可使用以下代码：</span><br><span class="line"></span><br><span class="line">let myContext = LAContext()</span><br><span class="line">let myLocalizedReasonString = &lt;#String explaining why app needs authentication#&gt;</span><br><span class="line">var authError: NSError?</span><br><span class="line">if #available(iOS 8.0, macOS 10.12.1, *) &#123;</span><br><span class="line">if myContext.canEvaluatePolicy(.deviceOwnerAuthenticationWithBiometrics, error: &amp;authError) &#123;</span><br><span class="line">myContext.evaluatePolicy(.deviceOwnerAuthenticationWithBiometrics, localizedReason: myLocalizedReasonString) &#123; success, evaluateError in</span><br><span class="line">if success &#123;</span><br><span class="line">// 用户验证通过</span><br><span class="line">&#125; else &#123;</span><br><span class="line">// 用户验证失败，处理失败信息</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">// 不能执行策略验证，处理验证错误信息</span><br><span class="line">&#125;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">// Fallback on earlier versions</span><br><span class="line">&#125;</span><br><span class="line">LAContext新增API如下：</span><br><span class="line">1. biometryType属性返回当前设备支持的生物学特征验证方式，他的值可以分别为typeFaceID、typeTouchID或者none。</span><br><span class="line">2. localizedReason需要验证时展示在弹框上的提示信息</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/mcqingxian.github.io/2017/09/28/悟- Mac快捷键/Homebrew/" rel="next" title="Homebrew 安装使用">
                <i class="fa fa-chevron-left"></i> Homebrew 安装使用
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/mcqingxian.github.io/2018/03/19/悟-OC/Masonry/" rel="prev" title="Masonry基础理解">
                Masonry基础理解 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image" src="/mcqingxian.github.io/uploads/images/dengta.jpg" alt="Mc">
          
            <p class="site-author-name" itemprop="name">Mc</p>
            <p class="site-description motion-element" itemprop="description">感-人生苦短 ⏰ 悟-学海无涯</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/mcqingxian.github.io/archives/">
            
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/mcqingxian.github.io/categories/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/mcqingxian.github.io/tags/index.html">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.jianshu.com/users/d0b8d219bacb/timeline" title="简书" target="_blank">简书</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.cnblogs.com/xiao-love-meng/" title="cnblogs" target="_blank">cnblogs</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://juejin.im/entry/5888b29d128fe1006c51b9e6" title="iOS资料" target="_blank">iOS资料</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://juejin.im/entry/59b22efb6fb9a024a04b3726" title="Git教程" target="_blank">Git教程</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://man.linuxde.net/sub/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E5%91%BD%E4%BB%A4" title="Linux命令" target="_blank">Linux命令</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://hit-alibaba.github.io/interview/iOS/ObjC-Basic/Runloop.html" title="iOS面试题总结" target="_blank">iOS面试题总结</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-iPhone-X-上运行有黑色区域问题"><span class="nav-number">1.</span> <span class="nav-text">1.iPhone X 上运行有黑色区域问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-navigationBar适配"><span class="nav-number">2.</span> <span class="nav-text">2.navigationBar适配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-tabBar适配"><span class="nav-number">3.</span> <span class="nav-text">3.tabBar适配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-iOS11新增版本判断API"><span class="nav-number">4.</span> <span class="nav-text">4. iOS11新增版本判断API</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-新增框架"><span class="nav-number">5.</span> <span class="nav-text">5.新增框架</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-UINavigationBar新增属性prefersLargeTitles（BOOL）"><span class="nav-number">6.</span> <span class="nav-text">6. UINavigationBar新增属性prefersLargeTitles（BOOL）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-Navigation-集成-UISearchController"><span class="nav-number">7.</span> <span class="nav-text">7. Navigation 集成 UISearchController</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-UINavigationController和滚动交互"><span class="nav-number">8.</span> <span class="nav-text">8. UINavigationController和滚动交互</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-UIToolbar-and-UINavigationBar—-Layout"><span class="nav-number">9.</span> <span class="nav-text">9. UIToolbar and UINavigationBar— Layout</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-Avoiding-Zero-Sized-Custom-Views"><span class="nav-number">10.</span> <span class="nav-text">10. Avoiding Zero-Sized Custom Views</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-管理margins-和-insets"><span class="nav-number">11.</span> <span class="nav-text">11. 管理margins 和 insets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#12-UIScrollView-and-UITableView的新特性"><span class="nav-number">12.</span> <span class="nav-text">12. UIScrollView and UITableView的新特性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#13-TableViews-：在iOS-11中默认启用Self-Sizing"><span class="nav-number">13.</span> <span class="nav-text">13. TableViews ：在iOS 11中默认启用Self-Sizing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#14-TableViews：separatorInset-扩展"><span class="nav-number">14.</span> <span class="nav-text">14. TableViews：separatorInset 扩展</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#15-TableViews-和-SafeArea"><span class="nav-number">15.</span> <span class="nav-text">15. TableViews 和 SafeArea</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#16-滑动操作（Swipe-Actions）-右滑-删除-置顶-收藏等"><span class="nav-number">16.</span> <span class="nav-text">16. 滑动操作（Swipe Actions）(右滑-删除,置顶,收藏等)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#17-UIBarItem"><span class="nav-number">17.</span> <span class="nav-text">17. UIBarItem</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#18-遇到的另外一个与安全区域无关的tableView内容下移的问题"><span class="nav-number">18.</span> <span class="nav-text">18. 遇到的另外一个与安全区域无关的tableView内容下移的问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#19-安全区域适配"><span class="nav-number">19.</span> <span class="nav-text">19. 安全区域适配</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2016 &mdash; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mc</span>

  
  <div class="theme-info">
  <div class="powered-by"></div>
</div>
</div>

        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/mcqingxian.github.io/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/mcqingxian.github.io/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/mcqingxian.github.io/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/mcqingxian.github.io/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/mcqingxian.github.io/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/mcqingxian.github.io/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/mcqingxian.github.io/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/mcqingxian.github.io/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/mcqingxian.github.io/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/mcqingxian.github.io/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/mcqingxian.github.io/js/src/schemes/pisces.js?v=5.1.2"></script>



  <script type="text/javascript" src="/mcqingxian.github.io/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/mcqingxian.github.io/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/mcqingxian.github.io/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
</html>
